import tkinter as tk
import keyboard

def save_button(selected_button):
    button.config(text=f"Selected Button: {selected_button}")

def sploit():
    # Placeholder code for the script to be run when the assigned button is pressed
    pass

def button_selected():
    # Get the key code of the selected button
    selected_button = keyboard.read_event(suppress=True).name
    save_button(selected_button)
    keyboard.add_hotkey(selected_button, sploit)

def on_close():
    # Prevent the window from being closed directly
    window.withdraw()

def on_minimize(event):
    # Withdraw the window when it is minimized
    window.withdraw()

def on_activate(event):
    # Deiconify the window when it is activated
    window.deiconify()

def main():
    # Create a tkinter window
    window = tk.Tk()
    window.title("Nexploits")

    # Create a label
    label = tk.Label(window, text="Select the button to run sploit():")
    label.pack()

    # Create a button to select the keyboard button
    button = tk.Button(window, text="Select Button", command=button_selected)
    button.pack()

    # Bind events to window actions
    window.protocol("WM_DELETE_WINDOW", on_close)  # Prevent closing window directly
    window.bind("<Unmap>", on_minimize)  # Withdraw window when minimized
    window.bind("<Map>", on_activate)  # Deiconify window when activated

    # Run the tkinter event loop
    window.mainloop()

# Call the main function when the script is executed
if __name__ == "__main__":
    main()
