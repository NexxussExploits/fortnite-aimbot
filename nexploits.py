import tkinter as tk
import keyboard

def save_button(selected_button):
    button.config(text=f"Selected Button: {selected_button}")

def sploit():
    # this is a placeholder for the aimbot code
    print("Exploit activated!")
    window.after(1000, clear_message)

def clear_message():
    # Clears the message after 1 second
    print("")

def button_selected():
    # gets the key code of the selected button
    selected_button = "F2"  # Set the selected button to F2
    save_button(selected_button)
    keyboard.add_hotkey(selected_button, sploit)

def on_close():
    # prevents the window from being closed directly
    window.withdraw()

def on_minimize(event):
    # withdraws the window when it is minimized
    window.withdraw()

def on_activate(event):
    # deiconifys the window when it is activated
    window.deiconify()

def main():
    global window, button
    # creates a tkinter window
    window = tk.Tk()
    window.title("NEXPLOITS")

    # creates a label
    label = tk.Label(window, text="Select the button to run the Exploits:")
    label.pack()

    # creates a button to select the keyboard button
    button = tk.Button(window, text="Select Button", command=button_selected)
    button.pack()

    # binds events to window actions
    window.protocol("WM_DELETE_WINDOW", on_close)  # Prevent closing window directly
    window.bind("<Unmap>", on_minimize)  # Withdraw window when minimized
    window.bind("<Map>", on_activate)  # Deiconify window when activated

    # Register the F2 key press event
    keyboard.add_hotkey("F2", sploit)

    # runs the tkinter event loop
    window.mainloop()

# calls the main function when the script is executed
if __name__ == "__main__":
    main()
